
> sarkari-admin-frontend@0.1.0 test:e2e:ci
> playwright test --config playwright.config.ts

[2m[WebServer] [22m
[2m[WebServer] [22m> sarkari-admin-frontend@0.1.0 dev
[2m[WebServer] [22m> vite --host 127.0.0.1 --port 4174
[2m[WebServer] [22m
[2m[WebServer] [22m
[2m[WebServer] [22m  [32m[1mVITE[22m v7.3.1[39m  [2mready in [0m[1m380[22m[2m[0m ms[22m
[2m[WebServer] [22m
[2m[WebServer] [22m  [32mÎ“â‚§Â£[39m  [1mLocal[22m:   [36mhttp://127.0.0.1:[1m4174[22m/admin-vnext/[39m

Running 17 tests using 2 workers

[WebServer] 10:15:51 am [vite] http proxy error: /api/admin-auth/me
[WebServer] AggregateError [ECONNREFUSED]: 
[WebServer]     at internalConnectMultiple (node:net:1134:18)
[WebServer]     at afterConnectMultiple (node:net:1715:7)
[WebServer] 10:15:51 am [vite] http proxy error: /api/admin-auth/permissions
[WebServer] AggregateError [ECONNREFUSED]: 
[WebServer]     at internalConnectMultiple (node:net:1134:18)
[WebServer]     at afterConnectMultiple (node:net:1715:7)
[WebServer] 10:15:51 am [vite] http proxy error: /api/admin-auth/me
[WebServer] AggregateError [ECONNREFUSED]: 
[WebServer]     at internalConnectMultiple (node:net:1134:18)
[WebServer]     at afterConnectMultiple (node:net:1715:7)
[WebServer] 10:15:51 am [vite] http proxy error: /api/admin-auth/permissions
[WebServer] AggregateError [ECONNREFUSED]: 
[WebServer]     at internalConnectMultiple (node:net:1134:18)
[WebServer]     at afterConnectMultiple (node:net:1715:7)
  Î“Â£Ã´   2 [chromium] Î“Ã‡â•‘ tests\admin.smoke.spec.ts:64:1 Î“Ã‡â•‘ admin login screen renders on desktop (963ms)
[WebServer] 10:15:52 am [vite] http proxy error: /api/admin-auth/me
[WebServer] AggregateError [ECONNREFUSED]: 
[WebServer]     at internalConnectMultiple (node:net:1134:18)
[WebServer]     at afterConnectMultiple (node:net:1715:7)
[WebServer] 10:15:52 am [vite] http proxy error: /api/admin-auth/permissions
[WebServer] AggregateError [ECONNREFUSED]: 
[WebServer]     at internalConnectMultiple (node:net:1134:18)
[WebServer]     at afterConnectMultiple (node:net:1715:7)
[WebServer] 10:15:52 am [vite] http proxy error: /api/admin-auth/me
[WebServer] AggregateError [ECONNREFUSED]: 
[WebServer]     at internalConnectMultiple (node:net:1134:18)
[WebServer]     at afterConnectMultiple (node:net:1715:7)
[WebServer] 10:15:52 am [vite] http proxy error: /api/admin-auth/permissions
[WebServer] AggregateError [ECONNREFUSED]: 
[WebServer]     at internalConnectMultiple (node:net:1134:18)
[WebServer]     at afterConnectMultiple (node:net:1715:7)
  Î“Â£Ã´   3 [chromium] Î“Ã‡â•‘ tests\admin.smoke.spec.ts:72:1 Î“Ã‡â•‘ admin shows desktop-required gate on mobile viewport (577ms)
[WebServer] 10:15:52 am [vite] http proxy error: /api/admin-auth/me
[WebServer] AggregateError [ECONNREFUSED]: 
[WebServer]     at internalConnectMultiple (node:net:1134:18)
[WebServer]     at afterConnectMultiple (node:net:1715:7)
[WebServer] 10:15:52 am [vite] http proxy error: /api/admin-auth/permissions
[WebServer] AggregateError [ECONNREFUSED]: 
[WebServer]     at internalConnectMultiple (node:net:1134:18)
[WebServer]     at afterConnectMultiple (node:net:1715:7)
[WebServer] 10:15:52 am [vite] http proxy error: /api/admin-auth/me
[WebServer] AggregateError [ECONNREFUSED]: 
[WebServer]     at internalConnectMultiple (node:net:1134:18)
[WebServer]     at afterConnectMultiple (node:net:1715:7)
[WebServer] 10:15:52 am [vite] http proxy error: /api/admin-auth/permissions
[WebServer] AggregateError [ECONNREFUSED]: 
[WebServer]     at internalConnectMultiple (node:net:1134:18)
[WebServer]     at afterConnectMultiple (node:net:1715:7)
  Î“Â£Ã´   4 [chromium] Î“Ã‡â•‘ tests\admin.smoke.spec.ts:81:1 Î“Ã‡â•‘ admin protected routes redirect to login on desktop (720ms)
[WebServer] 10:15:53 am [vite] http proxy error: /api/admin-auth/me
[WebServer] AggregateError [ECONNREFUSED]: 
[WebServer]     at internalConnectMultiple (node:net:1134:18)
[WebServer]     at afterConnectMultiple (node:net:1715:7)
[WebServer] 10:15:53 am [vite] http proxy error: /api/admin-auth/permissions
[WebServer] AggregateError [ECONNREFUSED]: 
[WebServer]     at internalConnectMultiple (node:net:1134:18)
[WebServer]     at afterConnectMultiple (node:net:1715:7)
[WebServer] 10:15:53 am [vite] http proxy error: /api/admin-auth/me
[WebServer] AggregateError [ECONNREFUSED]: 
[WebServer]     at internalConnectMultiple (node:net:1134:18)
[WebServer]     at afterConnectMultiple (node:net:1715:7)
[WebServer] 10:15:53 am [vite] http proxy error: /api/admin-auth/permissions
[WebServer] AggregateError [ECONNREFUSED]: 
[WebServer]     at internalConnectMultiple (node:net:1134:18)
[WebServer]     at afterConnectMultiple (node:net:1715:7)
  Î“Â£Ã´   5 [chromium] Î“Ã‡â•‘ tests\admin.smoke.spec.ts:89:1 Î“Ã‡â•‘ admin protected routes are blocked by desktop gate on mobile (287ms)
[WebServer] 10:15:54 am [vite] http proxy error: /api/admin-auth/me
[WebServer] AggregateError [ECONNREFUSED]: 
[WebServer]     at internalConnectMultiple (node:net:1134:18)
[WebServer]     at afterConnectMultiple (node:net:1715:7)
[WebServer] 10:15:54 am [vite] http proxy error: /api/admin-auth/permissions
[WebServer] AggregateError [ECONNREFUSED]: 
[WebServer]     at internalConnectMultiple (node:net:1134:18)
[WebServer]     at afterConnectMultiple (node:net:1715:7)
[WebServer] 10:15:54 am [vite] http proxy error: /api/admin-auth/me
[WebServer] AggregateError [ECONNREFUSED]: 
[WebServer]     at internalConnectMultiple (node:net:1134:18)
[WebServer]     at afterConnectMultiple (node:net:1715:7)
[WebServer] 10:15:54 am [vite] http proxy error: /api/admin-auth/permissions
[WebServer] AggregateError [ECONNREFUSED]: 
[WebServer]     at internalConnectMultiple (node:net:1134:18)
[WebServer]     at afterConnectMultiple (node:net:1715:7)
  Î“Â£Ã´   6 [chromium] Î“Ã‡â•‘ tests\admin.smoke.spec.ts:97:1 Î“Ã‡â•‘ primary login action keeps desktop button size standard (839ms)
  Î“Â£Ã´   7 [chromium] Î“Ã‡â•‘ tests\admin.smoke.spec.ts:108:1 Î“Ã‡â•‘ authenticated dashboard renders premium desktop shell (957ms)
  Î“Â£Ã´   8 [chromium] Î“Ã‡â•‘ tests\admin.smoke.spec.ts:122:1 Î“Ã‡â•‘ command palette opens from shell action in authenticated session (895ms)
  Î“Â£Ã´   9 [chromium] Î“Ã‡â•‘ tests\admin.smoke.spec.ts:136:1 Î“Ã‡â•‘ sidebar collapse toggles desktop rail state (804ms)
  Î“Â£Ã¿   1 [chromium] Î“Ã‡â•‘ tests\admin.workflow.spec.ts:13:1 Î“Ã‡â•‘ announcements supports filter presets and row actions (6.6s)
  Î“Â£Ã¿  10 [chromium] Î“Ã‡â•‘ tests\admin.smoke.spec.ts:151:1 Î“Ã‡â•‘ sidebar exposes full admin operations information architecture (632ms)
  -  12 [chromium] Î“Ã‡â•‘ tests\admin.smoke.spec.ts:170:1 Î“Ã‡â•‘ admin-vnext alias serves login shell when basename is admin-vnext
  Î“Â£Ã´  11 [chromium] Î“Ã‡â•‘ tests\admin.workflow.spec.ts:25:1 Î“Ã‡â•‘ review supports preview and execute flow with escape-close confirm dialog (1.7s)
  Î“Â£Ã´  13 [chromium] Î“Ã‡â•‘ tests\admin.workflow.spec.ts:50:1 Î“Ã‡â•‘ bulk import enforces preview modal and confirm flow (1.8s)
  Î“Â£Ã´  14 [chromium] Î“Ã‡â•‘ tests\admin.workflow.spec.ts:70:1 Î“Ã‡â•‘ sessions supports terminate flow with step-up and confirm dialog (1.2s)
  Î“Â£Ã´  15 [chromium] Î“Ã‡â•‘ tests\admin.workflow.spec.ts:80:1 Î“Ã‡â•‘ approvals uses structured decision modal with focus and escape-close (1.5s)
  Î“Â£Ã¿  16 [chromium] Î“Ã‡â•‘ tests\admin.workflow.spec.ts:99:1 Î“Ã‡â•‘ compact mode keeps small controls at least 40px tall (30.0s)
  Î“Â£Ã´  17 [chromium] Î“Ã‡â•‘ tests\admin.workflow.spec.ts:111:1 Î“Ã‡â•‘ keyboard opens command palette and focuses search input (636ms)


  1) [chromium] Î“Ã‡â•‘ tests\admin.smoke.spec.ts:151:1 Î“Ã‡â•‘ sidebar exposes full admin operations information architecture 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: getByRole('link', { name: /Reports/i })
    Expected: visible
    Error: strict mode violation: getByRole('link', { name: /Reports/i }) resolved to 2 elements:
        1) <a data-discover="true" class="admin-nav-link" href="/admin-vnext/reports" title="Broken links, expiries, and traffic snapshots.">Î“Ã‡Âª</a> aka getByRole('link', { name: 'Reports', exact: true })
        2) <a data-discover="true" class="admin-nav-link" href="/admin-vnext/errors" title="Application error triage and resolution workflows.">Î“Ã‡Âª</a> aka getByRole('link', { name: 'Error Reports' })

    Call log:
    [2m  - Expect "toBeVisible" with timeout 5000ms[22m
    [2m  - waiting for getByRole('link', { name: /Reports/i })[22m


      164 |     await expect(page.getByRole('link', { name: /SEO Tools/i })).toBeVisible();
      165 |     await expect(page.getByRole('link', { name: /Users & Roles/i })).toBeVisible();
    > 166 |     await expect(page.getByRole('link', { name: /Reports/i })).toBeVisible();
          |                                                                ^
      167 |     await expect(page.getByRole('link', { name: /Settings/i })).toBeVisible();
      168 | });
      169 |
        at C:\Users\abhis\Downloads\sarkari-result-git-clean\admin-frontend\tests\admin.smoke.spec.ts:166:64

    Error Context: test-results\admin.smoke-sidebar-expose-05f7e-ns-information-architecture-chromium\error-context.md

  2) [chromium] Î“Ã‡â•‘ tests\admin.workflow.spec.ts:13:1 Î“Ã‡â•‘ announcements supports filter presets and row actions 

    Error: [2mexpect([22m[31mlocator[39m[2m).not.[22mtoHaveValue[2m([22m[32mexpected[39m[2m)[22m failed

    Locator:  locator('#admin-preset-select')
    Expected: not [32m""[39m
    Received: [31m""[39m
    Timeout:  5000ms

    Call log:
    [2m  - Expect "not toHaveValue" with timeout 5000ms[22m
    [2m  - waiting for locator('#admin-preset-select')[22m
    [2m    9 â”œÃ¹ locator resolved to <select id="admin-preset-select">Î“Ã‡Âª</select>[22m
    [2m      - unexpected value ""[22m


      16 |     await page.getByPlaceholder(/Search by title/i).fill('Assistant Clerk');
      17 |     await page.getByRole('button', { name: /Save current filters/i }).click();
    > 18 |     await expect(page.locator('#admin-preset-select')).not.toHaveValue('');
         |                                                            ^
      19 |
      20 |     await page.getByRole('button', { name: /More actions for Assistant Clerk Recruitment 2026/i }).click();
      21 |     await page.getByRole('button', { name: /Mark Draft/i }).click();
        at C:\Users\abhis\Downloads\sarkari-result-git-clean\admin-frontend\tests\admin.workflow.spec.ts:18:60

    Error Context: test-results\admin.workflow-announcemen-16f35-ter-presets-and-row-actions-chromium\error-context.md

  3) [chromium] Î“Ã‡â•‘ tests\admin.workflow.spec.ts:99:1 Î“Ã‡â•‘ compact mode keeps small controls at least 40px tall 

    [31mTest timeout of 30000ms exceeded.[39m

    Error: locator.click: Test timeout of 30000ms exceeded.
    Call log:
    [2m  - waiting for getByRole('link', { name: /Announcements/i })[22m


      101 |
      102 |     await page.getByRole('button', { name: /Density: Comfortable/i }).click();
    > 103 |     await page.getByRole('link', { name: /Announcements/i }).click();
          |                                                              ^
      104 |
      105 |     const compactControl = page.getByRole('button', { name: /Save current filters/i });
      106 |     await expect(compactControl).toBeVisible();
        at C:\Users\abhis\Downloads\sarkari-result-git-clean\admin-frontend\tests\admin.workflow.spec.ts:103:62

    Error Context: test-results\admin.workflow-compact-mod-9ee14-controls-at-least-40px-tall-chromium\error-context.md

  3 failed
    [chromium] Î“Ã‡â•‘ tests\admin.smoke.spec.ts:151:1 Î“Ã‡â•‘ sidebar exposes full admin operations information architecture 
    [chromium] Î“Ã‡â•‘ tests\admin.workflow.spec.ts:13:1 Î“Ã‡â•‘ announcements supports filter presets and row actions 
    [chromium] Î“Ã‡â•‘ tests\admin.workflow.spec.ts:99:1 Î“Ã‡â•‘ compact mode keeps small controls at least 40px tall 
  1 skipped
  13 passed (50.8s)
